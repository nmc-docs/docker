<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-reference/docker-file" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Dockerfile | Docker</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/docker/reference/docker-file"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Dockerfile | Docker"><meta data-rh="true" name="description" content="üìÑ Dockerfile h·ªó tr·ª£ c√°c t·ª´ kh√≥a sau:"><meta data-rh="true" property="og:description" content="üìÑ Dockerfile h·ªó tr·ª£ c√°c t·ª´ kh√≥a sau:"><link data-rh="true" rel="icon" href="/docker/img/logo.svg"><link data-rh="true" rel="canonical" href="https://github.com/docker/reference/docker-file"><link data-rh="true" rel="alternate" href="https://github.com/docker/reference/docker-file" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/docker/reference/docker-file" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"T√†i li·ªáu tham kh·∫£o","item":"https://github.com/docker/category/t√†i-li·ªáu-tham-kh·∫£o"},{"@type":"ListItem","position":2,"name":"Dockerfile","item":"https://github.com/docker/reference/docker-file"}]}</script><link rel="stylesheet" href="/docker/assets/css/styles.bb62e3d6.css">
<script src="/docker/assets/js/runtime~main.99fd03f2.js" defer="defer"></script>
<script src="/docker/assets/js/main.aec1d5a4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/docker/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docker/"><div class="navbar__logo"><img src="/docker/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docker/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Docker</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/nmc-docs/docker" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docker/">Gi·ªõi thi·ªáu v·ªÅ Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docker/docker-images">Images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docker/docker-container">Container</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docker/docker-volumes">Volume v√† Bind Mount</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docker/category/docker-compose">Docker Compose</a><button aria-label="Expand sidebar category &#x27;Docker Compose&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docker/category/t√†i-li·ªáu-tham-kh·∫£o">T√†i li·ªáu tham kh·∫£o</a><button aria-label="Collapse sidebar category &#x27;T√†i li·ªáu tham kh·∫£o&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docker/category/cli-1">CLI</a><button aria-label="Expand sidebar category &#x27;CLI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docker/reference/docker-file">Dockerfile</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docker/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docker/category/t√†i-li·ªáu-tham-kh·∫£o"><span>T√†i li·ªáu tham kh·∫£o</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Dockerfile</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Dockerfile</h1></header>
<p>üìÑ Dockerfile h·ªó tr·ª£ c√°c t·ª´ kh√≥a sau:</p>
<table><thead><tr><th>T·ª´ kh√≥a</th><th>M√¥ t·∫£</th></tr></thead><tbody><tr><td><a href="#arg"><code>ARG</code></a></td><td>S·ª≠ d·ª•ng bi·∫øn l√∫c build image</td></tr><tr><td><a href="#cmd"><code>CMD</code></a></td><td>Ch·ªâ ƒë·ªãnh l·ªánh ch·∫°y m·∫∑c ƒë·ªãnh khi image ƒë∆∞·ª£c ch·∫°y trong container</td></tr><tr><td><a href="#copy"><code>COPY</code></a></td><td>Copy file v√† th∆∞ m·ª•c</td></tr><tr><td><a href="#entrypoint"><code>ENTRYPOINT</code></a></td><td>Ch·ªâ ƒë·ªãnh l·ªánh th·ª±c thi m·∫∑c ƒë·ªãnh</td></tr><tr><td><a href="#env"><code>ENV</code></a></td><td>Thi·∫øt l·∫≠p bi·∫øn m√¥i tr∆∞·ªùng</td></tr><tr><td><a href="#expose"><code>EXPOSE</code></a></td><td>M√¥ t·∫£ c·ªïng m√† ·ª©ng d·ª•ng c·ªßa ta ƒëang l·∫Øng nghe.</td></tr><tr><td><a href="#from"><code>FROM</code></a></td><td>T·∫°o m·ªõi m·ªôt build stage t·ª´ m·ªôt base image</td></tr><tr><td><a href="#healthcheck"><code>HEALTHCHECK</code></a></td><td>Ki·ªÉm tra t√¨nh tr·∫°ng c·ªßa container khi kh·ªüi ƒë·ªông.</td></tr><tr><td><a href="#label"><code>LABEL</code></a></td><td>Th√™m metadata v√†o image</td></tr><tr><td><a href="#maintainer-deprecated"><code>MAINTAINER</code></a></td><td>Ch·ªâ ƒë·ªãnh t√°c gi·∫£ t·∫°o ra¬†image.</td></tr><tr><td><a href="#run"><code>RUN</code></a></td><td>Execute build commands.</td></tr><tr><td><a href="#user"><code>USER</code></a></td><td>Thi·∫øt l·∫≠p user, group ID trong m√¥i tr∆∞·ªùng container</td></tr><tr><td><a href="#workdir"><code>WORKDIR</code></a></td><td>Ch·ªâ ƒë·ªãnh th∆∞ m·ª•c l√†m vi·ªác</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="copy">COPY<a href="#copy" class="hash-link" aria-label="Direct link to COPY" title="Direct link to COPY">‚Äã</a></h2>
<ul>
<li>C√¢u l·ªánh <code>COPY</code> d√πng ƒë·ªÉ ch√©p c√°c file code, th∆∞ vi·ªán, d·ªØ li·ªáu c·∫ßn thi·∫øt t·ª´ th∆∞ m·ª•c project v√†o trong image.</li>
<li>C√¢u l·ªánh <code>COPY</code> c√≥ 2 c√°ch vi·∫øt, c√°ch vi·∫øt th·ª© hai √°p d·ª•ng cho c√°c ƒë∆∞·ªùng d·∫´n ch·ª©a d·∫•u c√°ch:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> [OPTIONS] &lt;src&gt; ... &lt;dest&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> [OPTIONS] [</span><span class="token instruction string" style="color:#e3116c">&quot;&lt;src&gt;&quot;</span><span class="token instruction">, ... </span><span class="token instruction string" style="color:#e3116c">&quot;&lt;dest&gt;&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<table><thead><tr><th>Option</th></tr></thead><tbody><tr><td><code>--from</code></td></tr><tr><td><code>--chown</code></td></tr><tr><td><code>--chmod</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="Ô∏è-c√°c-t√πy-ch·ªçn-options">üõ†Ô∏è C√°c t√πy ch·ªçn (options)<a href="#Ô∏è-c√°c-t√πy-ch·ªçn-options" class="hash-link" aria-label="Direct link to üõ†Ô∏è C√°c t√πy ch·ªçn (options)" title="Direct link to üõ†Ô∏è C√°c t√πy ch·ªçn (options)">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1---chownusergroup">1. <code>--chown=&lt;user&gt;:&lt;group&gt;</code><a href="#1---chownusergroup" class="hash-link" aria-label="Direct link to 1---chownusergroup" title="Direct link to 1---chownusergroup">‚Äã</a></h4>
<ul>
<li>Ch·ªâ ƒë·ªãnh <strong>user v√† group ownership</strong> c·ªßa file/folder khi copy v√†o image.</li>
<li>V√≠ d·ª•:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#36acaa">--chown</span><span class="token instruction options punctuation" style="color:#393A34">=</span><span class="token instruction options string" style="color:#e3116c">appuser:appgroup</span><span class="token instruction"> . /app</span><br></span></code></pre></div></div>
<ul>
<li>H·ªØu √≠ch khi ta kh√¥ng mu·ªën file m·∫∑c ƒë·ªãnh l√† <code>root</code> trong container.</li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2---chmodpermission">2. <code>--chmod=[permission]</code><a href="#2---chmodpermission" class="hash-link" aria-label="Direct link to 2---chmodpermission" title="Direct link to 2---chmodpermission">‚Äã</a></h4>
<ul>
<li>Ch·ªâ ƒë·ªãnh quy·ªÅn truy c·∫≠p c·ªßa file sau khi sao ch√©p v√†o container. Gi√° tr·ªã c√≥ th·ªÉ l√† m·ªôt trong c√°c d·∫°ng:<!-- -->
<ul>
<li><strong>Ch·∫ø ƒë·ªô octal</strong> (v√≠ d·ª•: <code>755</code>, <code>644</code>).</li>
<li><strong>Ch·∫ø ƒë·ªô symbolic</strong> (v√≠ d·ª•: <code>u+x</code>, <code>a=r</code>).</li>
</ul>
</li>
<li>V√≠ d·ª•:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Sao ch√©p file nh∆∞ng ch·ªâ c·∫•p quy·ªÅn ƒë·ªçc cho t·∫•t c·∫£ ng∆∞·ªùi d√πng (kh√¥ng cho ph√©p s·ª≠a):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#36acaa">--chmod</span><span class="token instruction options punctuation" style="color:#393A34">=</span><span class="token instruction options string" style="color:#e3116c">644</span><span class="token instruction"> config.json /app/config.json</span><br></span></code></pre></div></div>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3---fromstage">3. <code>--from=&lt;stage&gt;</code><a href="#3---fromstage" class="hash-link" aria-label="Direct link to 3---fromstage" title="Direct link to 3---fromstage">‚Äã</a></h4>
<ul>
<li>T√πy ch·ªçn <code>--from</code> cho ph√©p ta <strong>sao ch√©p file t·ª´ m·ªôt stage kh√°c</strong> trong qu√° tr√¨nh build ƒëa giai ƒëo·∫°n.</li>
<li>C√∫ ph√°p:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#36acaa">--from</span><span class="token instruction options punctuation" style="color:#393A34">=</span><span class="token instruction options string" style="color:#e3116c">&lt;stage-name-or-index&gt;</span><span class="token instruction"> &lt;source_path&gt; &lt;destination_path&gt;</span><br></span></code></pre></div></div>
<p>üß† M·ª•c ƒë√≠ch:</p>
<ul>
<li><strong>T·ªëi ∆∞u h√≥a k√≠ch th∆∞·ªõc image:</strong> Ch·ªâ sao ch√©p nh·ªØng file c·∫ßn thi·∫øt t·ª´ m·ªôt image build s·∫µn.</li>
<li><strong>T√°ch bi·ªát c√°c b∆∞·ªõc build:</strong> Ta c√≥ th·ªÉ build project trong m·ªôt stage, r·ªìi ch·ªâ copy k·∫øt qu·∫£ (artifact) sang stage cu·ªëi c√πng.</li>
</ul>
<p>‚úÖ V√≠ d·ª• minh h·ªça: Multi-stage build:</p>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Stage 1: Build source code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> node:20-alpine </span><span class="token instruction keyword" style="color:#00009f">AS</span><span class="token instruction"> builder</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">WORKDIR</span><span class="token instruction"> /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> . .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> npm install &amp;&amp; npm run build</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Stage 2: Production image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> nginx:alpine</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#36acaa">--from</span><span class="token instruction options punctuation" style="color:#393A34">=</span><span class="token instruction options string" style="color:#e3116c">builder</span><span class="token instruction"> /app/dist /usr/share/nginx/html</span><br></span></code></pre></div></div>
<ul>
<li>·ªû v√≠ d·ª• tr√™n:<!-- -->
<ul>
<li><code>builder</code> l√† t√™n stage ƒë·∫ßu ti√™n.</li>
<li><code>COPY --from=builder</code> s·∫Ω ch·ªâ copy th∆∞ m·ª•c <code>/app/dist</code> t·ª´ image ƒë√≥ v√†o image hi·ªán t·∫°i.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="src"><code>&lt;src&gt;</code><a href="#src" class="hash-link" aria-label="Direct link to src" title="Direct link to src">‚Äã</a></h3>
<ul>
<li>ƒê∆∞·ªùng d·∫´n t·ªõi t·ªáp ho·∫∑c th∆∞ m·ª•c ngu·ªìn ·ªü m√°y host, ƒë∆∞·ªùng d·∫´n ƒë∆∞·ª£c t√≠nh t·ª´ th∆∞ m·ª•c <strong><a href="/docker/reference/cli/docker-build#-build-context-l%C3%A0-g%C3%AC">build context</a></strong>.</li>
<li>C√≥ th·ªÉ l√† m·ªôt ho·∫∑c nhi·ªÅu t·ªáp:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> file1.txt file2.txt /usr/src/things/</span><br></span></code></pre></div></div>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> . /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Copy t·∫•t c·∫£ file, th∆∞ m·ª•c t√≠nh t·ª´ build context v√†o b√™n trong th∆∞ m·ª•c &quot;app&quot; ·ªü image/container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Gi·∫£ s·ª≠ th∆∞ m·ª•c b√™n ngo√†i c√≥ c·∫•u tr√∫c:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ Dockerfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îî‚îÄ‚îÄ src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚îî‚îÄ‚îÄ app.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Th√¨ b√™n trong image/container:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îî‚îÄ‚îÄ src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚îî‚îÄ‚îÄ app.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#Copy t·∫•t c·∫£ file, th∆∞ m·ª•c b√™n trong th∆∞ m·ª•c &quot;src&quot; v√†o b√™n trong th∆∞ m·ª•c &quot;/app/src&quot; ·ªü image/container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> src/ /app/src/</span><br></span></code></pre></div></div>
<ul>
<li>Ta c≈©ng c√≥ th·ªÉ d√πng wildcard (*, ?) gi·ªëng nh∆∞ glob:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Copy t·∫•t c·∫£ c√°c file .js ·ªü th∆∞ m·ª•c &quot;src&quot; v√†o th∆∞ m·ª•c &quot;app&quot; ·ªü container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> src/*.js /app/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Copy t·∫•t c·∫£ c√°c file .png v√†o th∆∞ m·ª•c &quot;dest&quot; ·ªü container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> *.png /dest/</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>L∆∞u √Ω</div><div class="admonitionContent_BuS1"><ul>
<li>N·∫øu c√≥ <code>.dockerignore</code>, nh·ªØng file b·ªã li·ªát k√™ trong ƒë√≥ s·∫Ω kh√¥ng ƒë∆∞·ª£c copy.</li>
<li>Docker s·ª≠ d·ª•ng cache theo t·ª´ng l·ªánh. N·∫øu file thay ƒë·ªïi, l·ªánh <code>COPY</code> s·∫Ω ƒë∆∞·ª£c th·ª±c hi·ªán l·∫°i ‚Üí ·∫£nh h∆∞·ªüng ƒë·∫øn hi·ªáu su·∫•t build.</li>
</ul></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dest"><code>&lt;dest&gt;</code><a href="#dest" class="hash-link" aria-label="Direct link to dest" title="Direct link to dest">‚Äã</a></h3>
<ul>
<li>ƒê∆∞·ªùng d·∫´n ƒë√≠ch b√™n trong image. C√≥ th·ªÉ l√† th∆∞ m·ª•c ho·∫∑c file.<!-- -->
<ul>
<li>N·∫øu l√† th∆∞ m·ª•c, c√°c file s·∫Ω ƒë∆∞·ª£c copy v√†o b√™n trong th∆∞ m·ª•c ƒë√≥.</li>
<li>N·∫øu th∆∞ m·ª•c kh√¥ng t·ªìn t·∫°i, Docker s·∫Ω t·∫°o ra.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="env">ENV<a href="#env" class="hash-link" aria-label="Direct link to ENV" title="Direct link to ENV">‚Äã</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><ul>
<li>L·ªánh <code>ENV</code> trong Dockerfile ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ƒë·∫∑t c√°c bi·∫øn m√¥i tr∆∞·ªùng (environment variables) b√™n trong image, nh·ªØng bi·∫øn n√†y s·∫Ω c√≥ s·∫µn khi container ƒë∆∞·ª£c ch·∫°y. ƒêi·ªÅu n√†y gi√∫p ta c·∫•u h√¨nh c√°c ·ª©ng d·ª•ng b√™n trong container ho·∫∑c truy·ªÅn th√¥ng tin c·∫ßn thi·∫øt trong su·ªët qu√° tr√¨nh ch·∫°y c·ªßa container.</li>
<li>C√∫ ph√°p:</li>
</ul><div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ENV</span><span class="token instruction"> &lt;key&gt;=&lt;value&gt; ...</span><br></span></code></pre></div></div><ul>
<li>Trong ƒë√≥:<!-- -->
<ul>
<li><strong><code>&lt;key&gt;</code></strong>: T√™n c·ªßa bi·∫øn m√¥i tr∆∞·ªùng.</li>
<li><strong><code>&lt;value&gt;</code></strong>: Gi√° tr·ªã c·ªßa bi·∫øn m√¥i tr∆∞·ªùng.</li>
</ul>
</li>
</ul></div></div>
<ul>
<li>Ta c√≥ th·ªÉ ch·ªâ ƒë·ªãnh nhi·ªÅu bi·∫øn m√¥i tr∆∞·ªùng c√πng m·ªôt l√∫c, m·ªói bi·∫øn c√°ch nhau b·∫±ng d·∫•u c√°ch.</li>
<li>üß† M·ª•c ƒë√≠ch c·ªßa l·ªánh ENV:<!-- -->
<ul>
<li>C·∫•u h√¨nh container: Cung c·∫•p c√°c th√¥ng s·ªë nh∆∞ c·ªïng, th∆∞ m·ª•c, ho·∫∑c th√¥ng tin c·∫•u h√¨nh kh√°c cho ·ª©ng d·ª•ng.</li>
<li>ƒê·∫£m b·∫£o t√≠nh di ƒë·ªông: Gi√∫p Docker container c√≥ th·ªÉ ho·∫°t ƒë·ªông gi·ªëng nhau tr√™n c√°c m√¥i tr∆∞·ªùng kh√°c nhau, t·ª´ m√°y t√≠nh c√° nh√¢n, m√°y ch·ªß ƒë·∫øn m√¥i tr∆∞·ªùng cloud.</li>
<li>D·ªÖ d√†ng thay ƒë·ªïi c·∫•u h√¨nh: Thay v√¨ ph·∫£i thay ƒë·ªïi m√£ ngu·ªìn ho·∫∑c <strong>Dockerfile</strong>, ta c√≥ th·ªÉ ch·ªâ c·∫ßn thay ƒë·ªïi gi√° tr·ªã c·ªßa bi·∫øn m√¥i tr∆∞·ªùng khi ch·∫°y container.</li>
</ul>
</li>
<li>üî® V√≠ d·ª• v·ªÅ l·ªánh ENV:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ENV</span><span class="token instruction"> NODE_ENV=production</span><br></span></code></pre></div></div>
<p>üëâ Bi·∫øn m√¥i tr∆∞·ªùng <code>NODE_ENV</code> s·∫Ω c√≥ gi√° tr·ªã l√† <strong>production</strong> trong to√†n b·ªô container khi n√≥ ƒëang ch·∫°y. C√°c ·ª©ng d·ª•ng b√™n trong container c√≥ th·ªÉ s·ª≠ d·ª•ng gi√° tr·ªã n√†y ƒë·ªÉ bi·∫øt container ƒëang ch·∫°y trong m√¥i tr∆∞·ªùng s·∫£n xu·∫•t.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="s·ª≠-d·ª•ng-bi·∫øn-m√¥i-tr∆∞·ªùng-trong-c√°c-l·ªánh-k·∫ø-ti·∫øp">S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng trong c√°c l·ªánh k·∫ø ti·∫øp:<a href="#s·ª≠-d·ª•ng-bi·∫øn-m√¥i-tr∆∞·ªùng-trong-c√°c-l·ªánh-k·∫ø-ti·∫øp" class="hash-link" aria-label="Direct link to S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng trong c√°c l·ªánh k·∫ø ti·∫øp:" title="Direct link to S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng trong c√°c l·ªánh k·∫ø ti·∫øp:">‚Äã</a></h3>
<ul>
<li>Bi·∫øn m√¥i tr∆∞·ªùng c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng trong c√°c l·ªánh ti·∫øp theo trong <strong>Dockerfile</strong>:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ENV</span><span class="token instruction"> APP_HOME=/app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">WORKDIR</span><span class="token instruction"> </span><span class="token instruction variable" style="color:#36acaa">$APP_HOME</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> . </span><span class="token instruction variable" style="color:#36acaa">$APP_HOME</span><br></span></code></pre></div></div>
<p>üëâ ·ªû ƒë√¢y, ta ƒë·ªãnh nghƒ©a m·ªôt bi·∫øn m√¥i tr∆∞·ªùng <code>APP_HOME</code>, sau ƒë√≥ s·ª≠ d·ª•ng n√≥ trong l·ªánh <code>WORKDIR</code> v√† <code>COPY</code> ƒë·ªÉ ch·ªâ ƒë·ªãnh th∆∞ m·ª•c l√†m vi·ªác v√† sao ch√©p m√£ ngu·ªìn v√†o th∆∞ m·ª•c ƒë√≥.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thay-ƒë·ªïi-gi√°-tr·ªã-c·ªßa-bi·∫øn-m√¥i-tr∆∞·ªùng-khi-ch·∫°y-container">Thay ƒë·ªïi gi√° tr·ªã c·ªßa bi·∫øn m√¥i tr∆∞·ªùng khi ch·∫°y container:<a href="#thay-ƒë·ªïi-gi√°-tr·ªã-c·ªßa-bi·∫øn-m√¥i-tr∆∞·ªùng-khi-ch·∫°y-container" class="hash-link" aria-label="Direct link to Thay ƒë·ªïi gi√° tr·ªã c·ªßa bi·∫øn m√¥i tr∆∞·ªùng khi ch·∫°y container:" title="Direct link to Thay ƒë·ªïi gi√° tr·ªã c·ªßa bi·∫øn m√¥i tr∆∞·ªùng khi ch·∫°y container:">‚Äã</a></h3>
<ul>
<li>Khi ta ch·∫°y container, ta c√≥ th·ªÉ ghi ƒë√® gi√° tr·ªã c·ªßa m·ªôt bi·∫øn m√¥i tr∆∞·ªùng b·∫±ng c√°ch s·ª≠ d·ª•ng t√πy ch·ªçn -e trong l·ªánh docker run:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">NODE_ENV</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">development myapp</span><br></span></code></pre></div></div>
<p>Trong v√≠ d·ª• tr√™n, gi√° tr·ªã c·ªßa <code>NODE_ENV</code> s·∫Ω ƒë∆∞·ª£c thay ƒë·ªïi th√†nh <code>development</code>, d√π trong Dockerfile n√≥ ƒë√£ ƒë∆∞·ª£c ƒë·∫∑t l√† <code>production</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="arg">ARG<a href="#arg" class="hash-link" aria-label="Direct link to ARG" title="Direct link to ARG">‚Äã</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><ul>
<li>L·ªánh <code>ARG</code> trong Dockerfile ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ <strong>ƒë·ªãnh nghƒ©a c√°c bi·∫øn</strong> m√† c√≥ th·ªÉ ƒë∆∞·ª£c <strong>s·ª≠ d·ª•ng trong qu√° tr√¨nh build</strong> Docker image. C√°c bi·∫øn n√†y ch·ªâ c√≥ hi·ªáu l·ª±c trong qu√° tr√¨nh build v√† <strong>kh√¥ng t·ªìn t·∫°i trong container</strong> khi image ƒë√£ ƒë∆∞·ª£c t·∫°o ra.</li>
<li>C√∫ ph√°p:</li>
</ul><div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> &lt;name&gt;[=&lt;default_value&gt;]</span><br></span></code></pre></div></div><ul>
<li>Trong ƒë√≥:<!-- -->
<ul>
<li><strong><code>&lt;name&gt;</code></strong> : T√™n c·ªßa bi·∫øn.</li>
<li><strong><code>&lt;default_value&gt;</code></strong> (t√πy ch·ªçn): Gi√° tr·ªã m·∫∑c ƒë·ªãnh cho bi·∫øn n·∫øu kh√¥ng ƒë∆∞·ª£c cung c·∫•p khi build.</li>
</ul>
</li>
</ul></div></div>
<ul>
<li>
<p>üß† M·ª•c ƒë√≠ch c·ªßa <code>ARG</code>:</p>
<ul>
<li>Thi·∫øt l·∫≠p gi√° tr·ªã c·∫•u h√¨nh build: Ta c√≥ th·ªÉ s·ª≠ d·ª•ng <code>ARG</code> ƒë·ªÉ truy·ªÅn c√°c gi√° tr·ªã v√†o trong Dockerfile m√† c√≥ th·ªÉ thay ƒë·ªïi ƒë∆∞·ª£c trong qu√° tr√¨nh build.</li>
</ul>
</li>
<li>
<p>üî® V√≠ d·ª• c∆° b·∫£n v·ªÅ <code>ARG</code>:</p>
</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># ƒê·ªãnh nghƒ©a bi·∫øn ARG v·ªõi gi√° tr·ªã m·∫∑c ƒë·ªãnh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> VERSION=1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># S·ª≠ d·ª•ng gi√° tr·ªã c·ªßa ARG trong Dockerfile</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> echo </span><span class="token instruction string" style="color:#e3116c">&quot;Building version ${VERSION}&quot;</span><br></span></code></pre></div></div>
<p>üëâ Khi build image, Docker s·∫Ω s·ª≠ d·ª•ng gi√° tr·ªã <code>1.0</code> cho bi·∫øn <code>VERSION</code> tr·ª´ khi ta thay ƒë·ªïi n√≥ khi ch·∫°y l·ªánh build.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thay-ƒë·ªïi-gi√°-tr·ªã-arg-khi-build">Thay ƒë·ªïi gi√° tr·ªã <code>ARG</code> khi build<a href="#thay-ƒë·ªïi-gi√°-tr·ªã-arg-khi-build" class="hash-link" aria-label="Direct link to thay-ƒë·ªïi-gi√°-tr·ªã-arg-khi-build" title="Direct link to thay-ƒë·ªïi-gi√°-tr·ªã-arg-khi-build">‚Äã</a></h3>
<ul>
<li>Khi build, ta c√≥ th·ªÉ ch·ªâ ƒë·ªãnh gi√° tr·ªã c·ªßa <code>ARG</code> qua tham s·ªë <code>--build-arg</code>.</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build --build-arg </span><span class="token assign-left variable" style="color:#36acaa">VERSION</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2.0</span><span class="token plain"> </span><span class="token builtin class-name">.</span><br></span></code></pre></div></div>
<p>üëâ Trong tr∆∞·ªùng h·ª£p n√†y, Dockerfile s·∫Ω s·ª≠ d·ª•ng gi√° tr·ªã <code>2.0</code> thay v√¨ <code>1.0</code>.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="s·ª≠-d·ª•ng-arg-trong-from">S·ª≠ d·ª•ng <code>ARG</code> trong <code>FROM</code>:<a href="#s·ª≠-d·ª•ng-arg-trong-from" class="hash-link" aria-label="Direct link to s·ª≠-d·ª•ng-arg-trong-from" title="Direct link to s·ª≠-d·ª•ng-arg-trong-from">‚Äã</a></h3>
<ul>
<li>Ta c√≥ th·ªÉ s·ª≠ d·ª•ng <code>ARG</code> ƒë·ªÉ thay ƒë·ªïi base image trong qu√° tr√¨nh build:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> BASE_IMAGE=node:14</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> </span><span class="token instruction variable" style="color:#36acaa">${BASE_IMAGE}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Ti·∫øp t·ª•c c√°c l·ªánh kh√°c...</span><br></span></code></pre></div></div>
<ul>
<li>Khi build, ta c√≥ th·ªÉ ch·ªâ ƒë·ªãnh base image nh∆∞ sau:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build --build-arg </span><span class="token assign-left variable" style="color:#36acaa">BASE_IMAGE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">node:16 </span><span class="token builtin class-name">.</span><br></span></code></pre></div></div>
<p>üëâ Trong v√≠ d·ª• n√†y, Docker s·∫Ω s·ª≠ d·ª•ng <code>node:16</code> thay v√¨ <code>node:14</code>.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="k·∫øt-h·ª£p-v·ªõi-env">K·∫øt h·ª£p v·ªõi <code>ENV</code>:<a href="#k·∫øt-h·ª£p-v·ªõi-env" class="hash-link" aria-label="Direct link to k·∫øt-h·ª£p-v·ªõi-env" title="Direct link to k·∫øt-h·ª£p-v·ªõi-env">‚Äã</a></h3>
<ul>
<li>M·ªôt khi <code>ARG</code> ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a, ta c√≥ th·ªÉ chuy·ªÉn gi√° tr·ªã c·ªßa n√≥ sang m·ªôt bi·∫øn m√¥i tr∆∞·ªùng (<code>ENV</code>) ƒë·ªÉ s·ª≠ d·ª•ng trong container khi n√≥ ch·∫°y.</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> VERSION=1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ENV</span><span class="token instruction"> VERSION=</span><span class="token instruction variable" style="color:#36acaa">${VERSION}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> echo </span><span class="token instruction string" style="color:#e3116c">&quot;Running version ${VERSION}&quot;</span><br></span></code></pre></div></div>
<p>üëâ Trong tr∆∞·ªùng h·ª£p n√†y, khi container ƒë∆∞·ª£c ch·∫°y, gi√° tr·ªã <code>VERSION</code> s·∫Ω c√≥ s·∫µn trong m√¥i tr∆∞·ªùng container.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>L∆∞u √Ω</div><div class="admonitionContent_BuS1"><ul>
<li>Bi·∫øn <code>ARG</code> ch·ªâ c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng trong qu√° tr√¨nh build. Sau khi image ƒë√£ ƒë∆∞·ª£c t·∫°o ra, c√°c bi·∫øn <code>ARG</code> s·∫Ω kh√¥ng t·ªìn t·∫°i trong container.</li>
<li>N·∫øu kh√¥ng ch·ªâ ƒë·ªãnh gi√° tr·ªã khi build, Docker s·∫Ω s·ª≠ d·ª•ng gi√° tr·ªã m·∫∑c ƒë·ªãnh (n·∫øu c√≥).</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><ul>
<li>
<p>Trong m·ªôt <code>Dockerfile</code>, ch√∫ng ta th∆∞·ªùng d√πng k·∫øt h·ª£p <code>ARG</code> v√† <code>ENV</code> ƒë·ªÉ truy·ªÅn bi·∫øn m√¥i tr∆∞·ªùng v√†o qu√° tr√¨nh <strong>build</strong> ·ª©ng d·ª•ng front-end, ƒë·∫∑c bi·ªát v·ªõi c√°c framework nh∆∞ React, Vue, Angular,..Khi ch·∫°y <code>npm run build</code>, ch√∫ng s·∫Ω ƒë·ªçc c√°c bi·∫øn m√¥i tr∆∞·ªùng l√∫c build (build time) ƒë·ªÉ nh√∫ng th·∫≥ng v√†o file JS/HTML (kh√¥ng ph·∫£i runtime).</p>
</li>
<li>
<p>V√≠ d·ª•:</p>
</li>
</ul><div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Khai b√°o ARG</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> REACT_APP_API_URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># G√°n v√†o ENV ƒë·ªÉ c√°c b∆∞·ªõc build c√≥ th·ªÉ truy c·∫≠p</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ENV</span><span class="token instruction"> REACT_APP_API_URL=</span><span class="token instruction variable" style="color:#36acaa">$REACT_APP_API_URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Copy m√£ ngu·ªìn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> . .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Build ·ª©ng d·ª•ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> npm install &amp;&amp; npm run build</span><br></span></code></pre></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build --build-arg </span><span class="token assign-left variable" style="color:#36acaa">REACT_APP_API_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://api.example.com </span><span class="token builtin class-name">.</span><br></span></code></pre></div></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-v√≠-d·ª•-ƒë·∫ßy-ƒë·ªß">üìå V√≠ d·ª• ƒë·∫ßy ƒë·ªß:<a href="#-v√≠-d·ª•-ƒë·∫ßy-ƒë·ªß" class="hash-link" aria-label="Direct link to üìå V√≠ d·ª• ƒë·∫ßy ƒë·ªß:" title="Direct link to üìå V√≠ d·ª• ƒë·∫ßy ƒë·ªß:">‚Äã</a></h3>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># ƒê·ªãnh nghƒ©a ARG cho version v√† base image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> VERSION=1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> BASE_IMAGE=node:14</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Ch·ªçn base image ƒë·ªông</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> </span><span class="token instruction variable" style="color:#36acaa">${BASE_IMAGE}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ƒê·∫∑t ENV t·ª´ ARG</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ENV</span><span class="token instruction"> APP_VERSION=</span><span class="token instruction variable" style="color:#36acaa">${VERSION}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># C√†i ƒë·∫∑t dependencies v√† sao ch√©p m√£ ngu·ªìn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> npm install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> . /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Ch·∫°y ·ª©ng d·ª•ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;npm&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;start&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<ul>
<li>Build command:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build --build-arg </span><span class="token assign-left variable" style="color:#36acaa">VERSION</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2.0</span><span class="token plain"> --build-arg </span><span class="token assign-left variable" style="color:#36acaa">BASE_IMAGE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">node:16 </span><span class="token builtin class-name">.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="from">FROM<a href="#from" class="hash-link" aria-label="Direct link to FROM" title="Direct link to FROM">‚Äã</a></h2>
<ul>
<li>Trong Dockerfile, l·ªánh <code>FROM</code> ƒë∆∞·ª£c d√πng ƒë·ªÉ <strong>ch·ªâ ƒë·ªãnh image g·ªëc (base image)</strong> m√† Docker s·∫Ω s·ª≠ d·ª•ng l√†m n·ªÅn t·∫£ng ƒë·ªÉ x√¢y d·ª±ng image m·ªõi.</li>
<li>M·ª•c ƒë√≠ch ch√≠nh c·ªßa FROM:<!-- -->
<ul>
<li>‚úÖ X√°c ƒë·ªãnh m√¥i tr∆∞·ªùng c∆° b·∫£n: v√≠ d·ª• Ubuntu, Alpine, Node.js, Python, v.v.</li>
<li>‚úÖ K·∫ø th·ª´a c√°c c√¥ng c·ª• v√† th∆∞ vi·ªán c√≥ s·∫µn trong image ƒë√≥.</li>
<li>‚úÖ L√† b∆∞·ªõc ƒë·∫ßu ti√™n b·∫Øt bu·ªôc trong h·∫ßu h·∫øt c√°c Dockerfile (tr·ª´ multistage build th√¨ c√≥ th·ªÉ c√≥ nhi·ªÅu <code>FROM</code>).</li>
</ul>
</li>
<li>V√≠ d·ª•:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> node:18-alpine</span><br></span></code></pre></div></div>
<p>üëâ D√≤ng n√†y n√≥i r·∫±ng Docker s·∫Ω b·∫Øt ƒë·∫ßu t·ª´ image <code>node</code> phi√™n b·∫£n <code>18-alpine</code>, m·ªôt image nh·ªè g·ªçn ƒë√£ c√†i s·∫µn Node.js.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="user">USER<a href="#user" class="hash-link" aria-label="Direct link to USER" title="Direct link to USER">‚Äã</a></h2>
<ul>
<li>L·ªánh <code>USER</code> trong Dockerfile ƒë∆∞·ª£c d√πng ƒë·ªÉ <strong>thi·∫øt l·∫≠p user (ng∆∞·ªùi d√πng)</strong> m√† c√°c l·ªánh sau ƒë√≥ trong Dockerfile (v√† container khi ch·∫°y) s·∫Ω ƒë∆∞·ª£c th·ª±c thi d∆∞·ªõi quy·ªÅn c·ªßa ng∆∞·ªùi d√πng ƒë√≥.</li>
<li>C√∫ ph√°p:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">USER</span><span class="token instruction"> &lt;username&gt;[:&lt;group&gt;]</span><br></span></code></pre></div></div>
<ul>
<li>
<p>üß† M·ª•c ƒë√≠ch:</p>
<ul>
<li><strong>B·∫£o m·∫≠t</strong>: Tr√°nh ch·∫°y container v·ªõi quy·ªÅn <code>root</code>, h·∫°n ch·∫ø nguy c∆° t·∫•n c√¥ng.</li>
<li><strong>Ph√¢n quy·ªÅn</strong>: D√πng user ph√π h·ª£p v·ªõi ·ª©ng d·ª•ng (v√≠ d·ª• <code>node</code>, <code>www-data</code>, v.v.)</li>
<li><strong>Chu·∫©n DevOps/SRE</strong>: C√°c t·ªï ch·ª©c th∆∞·ªùng kh√¥ng cho ph√©p ch·∫°y container b·∫±ng <code>root</code>.</li>
</ul>
</li>
<li>
<p><strong>V√≠ d·ª• 1</strong>: D√πng user c√≥ s·∫µn trong base image</p>
</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> node:18-alpine</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">WORKDIR</span><span class="token instruction"> /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> . .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> npm install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Chuy·ªÉn sang user node (ƒë√£ c√≥ s·∫µn trong node image)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">USER</span><span class="token instruction"> node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;node&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;index.js&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<ul>
<li><strong>V√≠ d·ª• 2</strong>: T·∫°o user m·ªõi r·ªìi d√πng</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> python:3.10-slim</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># T·∫°o user kh√¥ng ph·∫£i root</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> useradd -m myuser</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ƒê·∫∑t user hi·ªán t·∫°i</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">USER</span><span class="token instruction"> myuser</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;python&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;app.py&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="expose">EXPOSE<a href="#expose" class="hash-link" aria-label="Direct link to EXPOSE" title="Direct link to EXPOSE">‚Äã</a></h2>
<ul>
<li>L·ªánh <code>EXPOSE</code> trong Dockerfile d√πng ƒë·ªÉ <strong>khai b√°o c·ªïng (port)</strong> m√† container s·∫Ω <strong>l·∫Øng nghe (listen)</strong> khi ch·∫°y. ƒê√¢y l√† c√°ch <strong>document h√≥a</strong> cho Docker v√† ng∆∞·ªùi d√πng bi·∫øt ·ª©ng d·ª•ng trong container ho·∫°t ƒë·ªông tr√™n c·ªïng n√†o.</li>
<li>V√≠ d·ª•:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">EXPOSE</span><span class="token instruction"> 3000</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>L∆∞u √Ω</div><div class="admonitionContent_BuS1"><ul>
<li><code>EXPOSE</code> <strong>kh√¥ng t·ª± ƒë·ªông m·ªü c·ªïng ra ngo√†i host</strong>. N√≥ ch·ªâ l√† metadata ƒë·ªÉ t√†i li·ªáu ho√°.</li>
<li>ƒê·ªÉ th·∫≠t s·ª± <strong>truy c·∫≠p t·ª´ b√™n ngo√†i</strong> , ta c·∫ßn d√πng <code>-p</code> khi ch·∫°y container:</li>
</ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">:3000 my-image</span><br></span></code></pre></div></div><p>üëâ L√∫c n√†y:</p><ul>
<li>C·ªïng <code>3000</code> trong container ƒë∆∞·ª£c √°nh x·∫° ra c·ªïng <code>8080</code> tr√™n m√°y host.</li>
<li>Ta c√≥ th·ªÉ truy c·∫≠p app qua <code>http://localhost:8080</code>.</li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cmd">CMD<a href="#cmd" class="hash-link" aria-label="Direct link to CMD" title="Direct link to CMD">‚Äã</a></h2>
<ul>
<li>L·ªánh <code>CMD</code> trong Dockerfile ƒë∆∞·ª£c d√πng ƒë·ªÉ <strong>ch·ªâ ƒë·ªãnh l·ªánh m·∫∑c ƒë·ªãnh s·∫Ω ƒë∆∞·ª£c ch·∫°y</strong> khi container kh·ªüi ƒë·ªông.</li>
<li>C√∫ ph√°p:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;executable&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;param1&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;param2&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<ul>
<li>V√≠ d·ª•:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;node&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;index.js&quot;</span><span class="token instruction">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;npm&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;run&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;dev&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>L∆∞u √Ω</div><div class="admonitionContent_BuS1"><ul>
<li>Trong m·ªôt Dockerfile ch·ªâ ƒë∆∞·ª£c c√≥ <strong>m·ªôt d√≤ng</strong> <code>CMD</code> (l·ªánh sau s·∫Ω ghi ƒë√® l·ªánh tr∆∞·ªõc).</li>
<li>N·∫øu ta ch·∫°y <code>docker run IMAGE l·ªánh_m·ªõi</code> , th√¨ l·ªánh ƒë√≥ s·∫Ω <strong>ghi ƒë√® CMD</strong> .</li>
<li>V√≠ d·ª•:</li>
</ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run my-image </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> anotherFile.js</span><br></span></code></pre></div></div><p>‚Üí L·ªánh <code>node anotherFile.js</code> s·∫Ω thay th·∫ø <code>CMD [&quot;npm&quot;, &quot;start&quot;]</code>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="entrypoint">ENTRYPOINT<a href="#entrypoint" class="hash-link" aria-label="Direct link to ENTRYPOINT" title="Direct link to ENTRYPOINT">‚Äã</a></h2>
<ul>
<li>L·ªánh <code>ENTRYPOINT</code> trong Dockerfile d√πng ƒë·ªÉ <strong>ƒë·ªãnh nghƒ©a l·ªánh ch√≠nh (main command)</strong> m√† container <strong>lu√¥n lu√¥n ch·∫°y khi kh·ªüi ƒë·ªông</strong> , <strong>kh√¥ng b·ªã ghi ƒë√®</strong> b·ªüi tham s·ªë khi ch·∫°y <code>docker run</code>.</li>
<li>L·ªánh n√†y th∆∞·ªùng ƒë∆∞·ª£c k·∫øt h·ª£p v·ªõi l·ªánh <code>CMD</code>. Khi k·∫øt h·ª£p, c√¢u l·ªánh th·ª±c thi s·∫Ω l√† <code>ENTRYPOINT + CMD</code></li>
<li>C√∫ ph√°p:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ENTRYPOINT</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;executable&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;param1&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;param2&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="v√≠-d·ª•-1">V√≠ d·ª• 1:<a href="#v√≠-d·ª•-1" class="hash-link" aria-label="Direct link to V√≠ d·ª• 1:" title="Direct link to V√≠ d·ª• 1:">‚Äã</a></h3>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> ubuntu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ENTRYPOINT</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;echo&quot;</span><span class="token instruction">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;Hello from Docker!&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<p>üëâ Khi th·ª±c thi:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run my-image </span><span class="token comment" style="color:#999988;font-style:italic"># Output: Hello from Docker!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run my-image </span><span class="token string" style="color:#e3116c">&quot;Custom message&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Output: Custom message</span><br></span></code></pre></div></div>
<p>‚úÖ V√¨ <code>ENTRYPOINT</code> l√† <code>echo</code>, c√≤n <code>CMD</code> ch·ªâ l√† tham s·ªë m·∫∑c ƒë·ªãnh (<code>Hello from Docker!</code>) n·∫øu kh√¥ng c√≥ g√¨ ƒë∆∞·ª£c ghi ƒë√®.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="v√≠-d·ª•-2">V√≠ d·ª• 2:<a href="#v√≠-d·ª•-2" class="hash-link" aria-label="Direct link to V√≠ d·ª• 2:" title="Direct link to V√≠ d·ª• 2:">‚Äã</a></h3>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> python:3.10-slim</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">WORKDIR</span><span class="token instruction"> /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> script.py .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ENTRYPOINT</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;python&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;script.py&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<p>üëâ Khi th·ª±c thi:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run my-image arg1 arg2</span><br></span></code></pre></div></div>
<p>‚û°Ô∏è Docker s·∫Ω th·ª±c hi·ªán:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python script.py arg1 arg2</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>L∆∞u √Ω</div><div class="admonitionContent_BuS1"><ul>
<li>N·∫øu mu·ªën ghi ƒë√® <code>ENTRYPOINT</code>, ta <strong>ph·∫£i d√πng flag</strong> <code>--entrypoint</code> khi ch·∫°y container.</li>
<li>Trong m·ªôt Dockerfile ch·ªâ ƒë∆∞·ª£c c√≥ <strong>1</strong> <code>ENTRYPOINT</code> , d√≤ng sau s·∫Ω ghi ƒë√® d√≤ng tr∆∞·ªõc n·∫øu c√≥ nhi·ªÅu.</li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="run">RUN<a href="#run" class="hash-link" aria-label="Direct link to RUN" title="Direct link to RUN">‚Äã</a></h2>
<ul>
<li>L·ªánh <code>RUN</code> trong Dockerfile d√πng ƒë·ªÉ <strong>th·ª±c thi l·ªánh trong qu√° tr√¨nh build image</strong>, t·ª©c l√† l·ªánh ƒë√≥ <strong>ch·∫°y t·∫°i th·ªùi ƒëi·ªÉm Docker build</strong>, <strong>kh√¥ng ph·∫£i khi container ch·∫°y</strong>.</li>
<li>D√πng <code>RUN</code> khi:<!-- -->
<ul>
<li>C√†i ƒë·∫∑t ph·∫ßn m·ªÅm, package</li>
<li>Thi·∫øt l·∫≠p m√¥i tr∆∞·ªùng</li>
<li>Bi√™n d·ªãch code</li>
<li>D·ªçn d·∫πp file t·∫°m, cache</li>
<li>T·∫°o file, user, th∆∞ m·ª•c c·∫ßn thi·∫øt</li>
</ul>
</li>
<li>V√≠ d·ª•:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> node:18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># C√†i th√™m curl v√† nano</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt-get update &amp;&amp; apt-get install -y curl nano</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># T·∫°o th∆∞ m·ª•c ·ª©ng d·ª•ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> mkdir /app</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>L∆∞u √Ω</div><div class="admonitionContent_BuS1"><ul>
<li>M·ªói l·ªánh <code>RUN</code> t·∫°o ra <strong>m·ªôt layer m·ªõi</strong> trong image ‚Üí n√™n <strong>g·ªôp c√°c l·ªánh</strong> l·∫°i b·∫±ng <code>&amp;&amp;</code> ƒë·ªÉ t·ªëi ∆∞u k√≠ch th∆∞·ªõc image.</li>
</ul><p>‚úÖ N√™n:</p><div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt update &amp;&amp; apt install -y curl git &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br></span></code></pre></div></div><p>‚ùå Kh√¥ng n√™n:</p><div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt update</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt install -y curl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt install -y git</span><br></span></code></pre></div></div></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docker/reference/cli/docker-run"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">docker run</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#copy" class="table-of-contents__link toc-highlight">COPY</a><ul><li><a href="#Ô∏è-c√°c-t√πy-ch·ªçn-options" class="table-of-contents__link toc-highlight">üõ†Ô∏è C√°c t√πy ch·ªçn (options)</a></li><li><a href="#src" class="table-of-contents__link toc-highlight"><code>&lt;src&gt;</code></a></li><li><a href="#dest" class="table-of-contents__link toc-highlight"><code>&lt;dest&gt;</code></a></li></ul></li><li><a href="#env" class="table-of-contents__link toc-highlight">ENV</a><ul><li><a href="#s·ª≠-d·ª•ng-bi·∫øn-m√¥i-tr∆∞·ªùng-trong-c√°c-l·ªánh-k·∫ø-ti·∫øp" class="table-of-contents__link toc-highlight">S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng trong c√°c l·ªánh k·∫ø ti·∫øp:</a></li><li><a href="#thay-ƒë·ªïi-gi√°-tr·ªã-c·ªßa-bi·∫øn-m√¥i-tr∆∞·ªùng-khi-ch·∫°y-container" class="table-of-contents__link toc-highlight">Thay ƒë·ªïi gi√° tr·ªã c·ªßa bi·∫øn m√¥i tr∆∞·ªùng khi ch·∫°y container:</a></li></ul></li><li><a href="#arg" class="table-of-contents__link toc-highlight">ARG</a><ul><li><a href="#thay-ƒë·ªïi-gi√°-tr·ªã-arg-khi-build" class="table-of-contents__link toc-highlight">Thay ƒë·ªïi gi√° tr·ªã <code>ARG</code> khi build</a></li><li><a href="#s·ª≠-d·ª•ng-arg-trong-from" class="table-of-contents__link toc-highlight">S·ª≠ d·ª•ng <code>ARG</code> trong <code>FROM</code>:</a></li><li><a href="#k·∫øt-h·ª£p-v·ªõi-env" class="table-of-contents__link toc-highlight">K·∫øt h·ª£p v·ªõi <code>ENV</code>:</a></li><li><a href="#-v√≠-d·ª•-ƒë·∫ßy-ƒë·ªß" class="table-of-contents__link toc-highlight">üìå V√≠ d·ª• ƒë·∫ßy ƒë·ªß:</a></li></ul></li><li><a href="#from" class="table-of-contents__link toc-highlight">FROM</a></li><li><a href="#user" class="table-of-contents__link toc-highlight">USER</a></li><li><a href="#expose" class="table-of-contents__link toc-highlight">EXPOSE</a></li><li><a href="#cmd" class="table-of-contents__link toc-highlight">CMD</a></li><li><a href="#entrypoint" class="table-of-contents__link toc-highlight">ENTRYPOINT</a><ul><li><a href="#v√≠-d·ª•-1" class="table-of-contents__link toc-highlight">V√≠ d·ª• 1:</a></li><li><a href="#v√≠-d·ª•-2" class="table-of-contents__link toc-highlight">V√≠ d·ª• 2:</a></li></ul></li><li><a href="#run" class="table-of-contents__link toc-highlight">RUN</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>