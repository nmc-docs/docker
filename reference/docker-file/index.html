<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-reference/docker-file" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Dockerfile | Docker</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/docker/reference/docker-file"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Dockerfile | Docker"><meta data-rh="true" name="description" content="ğŸ“„ Dockerfile há»— trá»£ cÃ¡c tá»« khÃ³a sau:"><meta data-rh="true" property="og:description" content="ğŸ“„ Dockerfile há»— trá»£ cÃ¡c tá»« khÃ³a sau:"><link data-rh="true" rel="icon" href="/docker/img/logo.svg"><link data-rh="true" rel="canonical" href="https://github.com/docker/reference/docker-file"><link data-rh="true" rel="alternate" href="https://github.com/docker/reference/docker-file" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/docker/reference/docker-file" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"TÃ i liá»‡u tham kháº£o","item":"https://github.com/docker/category/tÃ i-liá»‡u-tham-kháº£o"},{"@type":"ListItem","position":2,"name":"Dockerfile","item":"https://github.com/docker/reference/docker-file"}]}</script><link rel="stylesheet" href="/docker/assets/css/styles.bb62e3d6.css">
<script src="/docker/assets/js/runtime~main.99fd03f2.js" defer="defer"></script>
<script src="/docker/assets/js/main.aec1d5a4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/docker/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docker/"><div class="navbar__logo"><img src="/docker/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docker/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Docker</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/nmc-docs/docker" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docker/">Giá»›i thiá»‡u vá» Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docker/docker-images">Images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docker/docker-container">Container</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docker/docker-volumes">Volume vÃ  Bind Mount</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docker/category/docker-compose">Docker Compose</a><button aria-label="Expand sidebar category &#x27;Docker Compose&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docker/category/tÃ i-liá»‡u-tham-kháº£o">TÃ i liá»‡u tham kháº£o</a><button aria-label="Collapse sidebar category &#x27;TÃ i liá»‡u tham kháº£o&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docker/category/cli-1">CLI</a><button aria-label="Expand sidebar category &#x27;CLI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docker/reference/docker-file">Dockerfile</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docker/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docker/category/tÃ i-liá»‡u-tham-kháº£o"><span>TÃ i liá»‡u tham kháº£o</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Dockerfile</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Dockerfile</h1></header>
<p>ğŸ“„ Dockerfile há»— trá»£ cÃ¡c tá»« khÃ³a sau:</p>
<table><thead><tr><th>Tá»« khÃ³a</th><th>MÃ´ táº£</th></tr></thead><tbody><tr><td><a href="#arg"><code>ARG</code></a></td><td>Sá»­ dá»¥ng biáº¿n lÃºc build image</td></tr><tr><td><a href="#cmd"><code>CMD</code></a></td><td>Chá»‰ Ä‘á»‹nh lá»‡nh cháº¡y máº·c Ä‘á»‹nh khi image Ä‘Æ°á»£c cháº¡y trong container</td></tr><tr><td><a href="#copy"><code>COPY</code></a></td><td>Copy file vÃ  thÆ° má»¥c</td></tr><tr><td><a href="#entrypoint"><code>ENTRYPOINT</code></a></td><td>Chá»‰ Ä‘á»‹nh lá»‡nh thá»±c thi máº·c Ä‘á»‹nh</td></tr><tr><td><a href="#env"><code>ENV</code></a></td><td>Thiáº¿t láº­p biáº¿n mÃ´i trÆ°á»ng</td></tr><tr><td><a href="#expose"><code>EXPOSE</code></a></td><td>MÃ´ táº£ cá»•ng mÃ  á»©ng dá»¥ng cá»§a ta Ä‘ang láº¯ng nghe.</td></tr><tr><td><a href="#from"><code>FROM</code></a></td><td>Táº¡o má»›i má»™t build stage tá»« má»™t base image</td></tr><tr><td><a href="#healthcheck"><code>HEALTHCHECK</code></a></td><td>Kiá»ƒm tra tÃ¬nh tráº¡ng cá»§a container khi khá»Ÿi Ä‘á»™ng.</td></tr><tr><td><a href="#label"><code>LABEL</code></a></td><td>ThÃªm metadata vÃ o image</td></tr><tr><td><a href="#maintainer-deprecated"><code>MAINTAINER</code></a></td><td>Chá»‰ Ä‘á»‹nh tÃ¡c giáº£ táº¡o raÂ image.</td></tr><tr><td><a href="#run"><code>RUN</code></a></td><td>Execute build commands.</td></tr><tr><td><a href="#user"><code>USER</code></a></td><td>Thiáº¿t láº­p user, group ID trong mÃ´i trÆ°á»ng container</td></tr><tr><td><a href="#workdir"><code>WORKDIR</code></a></td><td>Chá»‰ Ä‘á»‹nh thÆ° má»¥c lÃ m viá»‡c</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="copy">COPY<a href="#copy" class="hash-link" aria-label="Direct link to COPY" title="Direct link to COPY">â€‹</a></h2>
<ul>
<li>CÃ¢u lá»‡nh <code>COPY</code> dÃ¹ng Ä‘á»ƒ chÃ©p cÃ¡c file code, thÆ° viá»‡n, dá»¯ liá»‡u cáº§n thiáº¿t tá»« thÆ° má»¥c project vÃ o trong image.</li>
<li>CÃ¢u lá»‡nh <code>COPY</code> cÃ³ 2 cÃ¡ch viáº¿t, cÃ¡ch viáº¿t thá»© hai Ã¡p dá»¥ng cho cÃ¡c Ä‘Æ°á»ng dáº«n chá»©a dáº¥u cÃ¡ch:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> [OPTIONS] &lt;src&gt; ... &lt;dest&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> [OPTIONS] [</span><span class="token instruction string" style="color:#e3116c">&quot;&lt;src&gt;&quot;</span><span class="token instruction">, ... </span><span class="token instruction string" style="color:#e3116c">&quot;&lt;dest&gt;&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<table><thead><tr><th>Option</th></tr></thead><tbody><tr><td><code>--from</code></td></tr><tr><td><code>--chown</code></td></tr><tr><td><code>--chmod</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ï¸-cÃ¡c-tÃ¹y-chá»n-options">ğŸ› ï¸ CÃ¡c tÃ¹y chá»n (options)<a href="#ï¸-cÃ¡c-tÃ¹y-chá»n-options" class="hash-link" aria-label="Direct link to ğŸ› ï¸ CÃ¡c tÃ¹y chá»n (options)" title="Direct link to ğŸ› ï¸ CÃ¡c tÃ¹y chá»n (options)">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1---chownusergroup">1. <code>--chown=&lt;user&gt;:&lt;group&gt;</code><a href="#1---chownusergroup" class="hash-link" aria-label="Direct link to 1---chownusergroup" title="Direct link to 1---chownusergroup">â€‹</a></h4>
<ul>
<li>Chá»‰ Ä‘á»‹nh <strong>user vÃ  group ownership</strong> cá»§a file/folder khi copy vÃ o image.</li>
<li>VÃ­ dá»¥:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#36acaa">--chown</span><span class="token instruction options punctuation" style="color:#393A34">=</span><span class="token instruction options string" style="color:#e3116c">appuser:appgroup</span><span class="token instruction"> . /app</span><br></span></code></pre></div></div>
<ul>
<li>Há»¯u Ã­ch khi ta khÃ´ng muá»‘n file máº·c Ä‘á»‹nh lÃ  <code>root</code> trong container.</li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2---chmodpermission">2. <code>--chmod=[permission]</code><a href="#2---chmodpermission" class="hash-link" aria-label="Direct link to 2---chmodpermission" title="Direct link to 2---chmodpermission">â€‹</a></h4>
<ul>
<li>Chá»‰ Ä‘á»‹nh quyá»n truy cáº­p cá»§a file sau khi sao chÃ©p vÃ o container. GiÃ¡ trá»‹ cÃ³ thá»ƒ lÃ  má»™t trong cÃ¡c dáº¡ng:<!-- -->
<ul>
<li><strong>Cháº¿ Ä‘á»™ octal</strong> (vÃ­ dá»¥: <code>755</code>, <code>644</code>).</li>
<li><strong>Cháº¿ Ä‘á»™ symbolic</strong> (vÃ­ dá»¥: <code>u+x</code>, <code>a=r</code>).</li>
</ul>
</li>
<li>VÃ­ dá»¥:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Sao chÃ©p file nhÆ°ng chá»‰ cáº¥p quyá»n Ä‘á»c cho táº¥t cáº£ ngÆ°á»i dÃ¹ng (khÃ´ng cho phÃ©p sá»­a):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#36acaa">--chmod</span><span class="token instruction options punctuation" style="color:#393A34">=</span><span class="token instruction options string" style="color:#e3116c">644</span><span class="token instruction"> config.json /app/config.json</span><br></span></code></pre></div></div>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3---fromstage">3. <code>--from=&lt;stage&gt;</code><a href="#3---fromstage" class="hash-link" aria-label="Direct link to 3---fromstage" title="Direct link to 3---fromstage">â€‹</a></h4>
<ul>
<li>TÃ¹y chá»n <code>--from</code> cho phÃ©p ta <strong>sao chÃ©p file tá»« má»™t stage khÃ¡c</strong> trong quÃ¡ trÃ¬nh build Ä‘a giai Ä‘oáº¡n.</li>
<li>CÃº phÃ¡p:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#36acaa">--from</span><span class="token instruction options punctuation" style="color:#393A34">=</span><span class="token instruction options string" style="color:#e3116c">&lt;stage-name-or-index&gt;</span><span class="token instruction"> &lt;source_path&gt; &lt;destination_path&gt;</span><br></span></code></pre></div></div>
<p>ğŸ§  Má»¥c Ä‘Ã­ch:</p>
<ul>
<li><strong>Tá»‘i Æ°u hÃ³a kÃ­ch thÆ°á»›c image:</strong> Chá»‰ sao chÃ©p nhá»¯ng file cáº§n thiáº¿t tá»« má»™t image build sáºµn.</li>
<li><strong>TÃ¡ch biá»‡t cÃ¡c bÆ°á»›c build:</strong> Ta cÃ³ thá»ƒ build project trong má»™t stage, rá»“i chá»‰ copy káº¿t quáº£ (artifact) sang stage cuá»‘i cÃ¹ng.</li>
</ul>
<p>âœ… VÃ­ dá»¥ minh há»a: Multi-stage build:</p>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Stage 1: Build source code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> node:20-alpine </span><span class="token instruction keyword" style="color:#00009f">AS</span><span class="token instruction"> builder</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">WORKDIR</span><span class="token instruction"> /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> . .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> npm install &amp;&amp; npm run build</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Stage 2: Production image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> nginx:alpine</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#36acaa">--from</span><span class="token instruction options punctuation" style="color:#393A34">=</span><span class="token instruction options string" style="color:#e3116c">builder</span><span class="token instruction"> /app/dist /usr/share/nginx/html</span><br></span></code></pre></div></div>
<ul>
<li>á» vÃ­ dá»¥ trÃªn:<!-- -->
<ul>
<li><code>builder</code> lÃ  tÃªn stage Ä‘áº§u tiÃªn.</li>
<li><code>COPY --from=builder</code> sáº½ chá»‰ copy thÆ° má»¥c <code>/app/dist</code> tá»« image Ä‘Ã³ vÃ o image hiá»‡n táº¡i.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="src"><code>&lt;src&gt;</code><a href="#src" class="hash-link" aria-label="Direct link to src" title="Direct link to src">â€‹</a></h3>
<ul>
<li>ÄÆ°á»ng dáº«n tá»›i tá»‡p hoáº·c thÆ° má»¥c nguá»“n á»Ÿ mÃ¡y host, Ä‘Æ°á»ng dáº«n Ä‘Æ°á»£c tÃ­nh tá»« thÆ° má»¥c <strong><a href="/docker/reference/cli/docker-build#-build-context-l%C3%A0-g%C3%AC">build context</a></strong>.</li>
<li>CÃ³ thá»ƒ lÃ  má»™t hoáº·c nhiá»u tá»‡p:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> file1.txt file2.txt /usr/src/things/</span><br></span></code></pre></div></div>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> . /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Copy táº¥t cáº£ file, thÆ° má»¥c tÃ­nh tá»« build context vÃ o bÃªn trong thÆ° má»¥c &quot;app&quot; á»Ÿ image/container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Giáº£ sá»­ thÆ° má»¥c bÃªn ngoÃ i cÃ³ cáº¥u trÃºc:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ Dockerfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€â”€ app.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ThÃ¬ bÃªn trong image/container:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€â”€ app.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#Copy táº¥t cáº£ file, thÆ° má»¥c bÃªn trong thÆ° má»¥c &quot;src&quot; vÃ o bÃªn trong thÆ° má»¥c &quot;/app/src&quot; á»Ÿ image/container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> src/ /app/src/</span><br></span></code></pre></div></div>
<ul>
<li>Ta cÅ©ng cÃ³ thá»ƒ dÃ¹ng wildcard (*, ?) giá»‘ng nhÆ° glob:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Copy táº¥t cáº£ cÃ¡c file .js á»Ÿ thÆ° má»¥c &quot;src&quot; vÃ o thÆ° má»¥c &quot;app&quot; á»Ÿ container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> src/*.js /app/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Copy táº¥t cáº£ cÃ¡c file .png vÃ o thÆ° má»¥c &quot;dest&quot; á»Ÿ container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> *.png /dest/</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>LÆ°u Ã½</div><div class="admonitionContent_BuS1"><ul>
<li>Náº¿u cÃ³ <code>.dockerignore</code>, nhá»¯ng file bá»‹ liá»‡t kÃª trong Ä‘Ã³ sáº½ khÃ´ng Ä‘Æ°á»£c copy.</li>
<li>Docker sá»­ dá»¥ng cache theo tá»«ng lá»‡nh. Náº¿u file thay Ä‘á»•i, lá»‡nh <code>COPY</code> sáº½ Ä‘Æ°á»£c thá»±c hiá»‡n láº¡i â†’ áº£nh hÆ°á»Ÿng Ä‘áº¿n hiá»‡u suáº¥t build.</li>
</ul></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dest"><code>&lt;dest&gt;</code><a href="#dest" class="hash-link" aria-label="Direct link to dest" title="Direct link to dest">â€‹</a></h3>
<ul>
<li>ÄÆ°á»ng dáº«n Ä‘Ã­ch bÃªn trong image. CÃ³ thá»ƒ lÃ  thÆ° má»¥c hoáº·c file.<!-- -->
<ul>
<li>Náº¿u lÃ  thÆ° má»¥c, cÃ¡c file sáº½ Ä‘Æ°á»£c copy vÃ o bÃªn trong thÆ° má»¥c Ä‘Ã³.</li>
<li>Náº¿u thÆ° má»¥c khÃ´ng tá»“n táº¡i, Docker sáº½ táº¡o ra.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="env">ENV<a href="#env" class="hash-link" aria-label="Direct link to ENV" title="Direct link to ENV">â€‹</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><ul>
<li>Lá»‡nh <code>ENV</code> trong Dockerfile Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘áº·t cÃ¡c biáº¿n mÃ´i trÆ°á»ng (environment variables) bÃªn trong image, nhá»¯ng biáº¿n nÃ y sáº½ cÃ³ sáºµn khi container Ä‘Æ°á»£c cháº¡y. Äiá»u nÃ y giÃºp ta cáº¥u hÃ¬nh cÃ¡c á»©ng dá»¥ng bÃªn trong container hoáº·c truyá»n thÃ´ng tin cáº§n thiáº¿t trong suá»‘t quÃ¡ trÃ¬nh cháº¡y cá»§a container.</li>
<li>CÃº phÃ¡p:</li>
</ul><div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ENV</span><span class="token instruction"> &lt;key&gt;=&lt;value&gt; ...</span><br></span></code></pre></div></div><ul>
<li>Trong Ä‘Ã³:<!-- -->
<ul>
<li><strong><code>&lt;key&gt;</code></strong>: TÃªn cá»§a biáº¿n mÃ´i trÆ°á»ng.</li>
<li><strong><code>&lt;value&gt;</code></strong>: GiÃ¡ trá»‹ cá»§a biáº¿n mÃ´i trÆ°á»ng.</li>
</ul>
</li>
</ul></div></div>
<ul>
<li>Ta cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh nhiá»u biáº¿n mÃ´i trÆ°á»ng cÃ¹ng má»™t lÃºc, má»—i biáº¿n cÃ¡ch nhau báº±ng dáº¥u cÃ¡ch.</li>
<li>ğŸ§  Má»¥c Ä‘Ã­ch cá»§a lá»‡nh ENV:<!-- -->
<ul>
<li>Cáº¥u hÃ¬nh container: Cung cáº¥p cÃ¡c thÃ´ng sá»‘ nhÆ° cá»•ng, thÆ° má»¥c, hoáº·c thÃ´ng tin cáº¥u hÃ¬nh khÃ¡c cho á»©ng dá»¥ng.</li>
<li>Äáº£m báº£o tÃ­nh di Ä‘á»™ng: GiÃºp Docker container cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng giá»‘ng nhau trÃªn cÃ¡c mÃ´i trÆ°á»ng khÃ¡c nhau, tá»« mÃ¡y tÃ­nh cÃ¡ nhÃ¢n, mÃ¡y chá»§ Ä‘áº¿n mÃ´i trÆ°á»ng cloud.</li>
<li>Dá»… dÃ ng thay Ä‘á»•i cáº¥u hÃ¬nh: Thay vÃ¬ pháº£i thay Ä‘á»•i mÃ£ nguá»“n hoáº·c <strong>Dockerfile</strong>, ta cÃ³ thá»ƒ chá»‰ cáº§n thay Ä‘á»•i giÃ¡ trá»‹ cá»§a biáº¿n mÃ´i trÆ°á»ng khi cháº¡y container.</li>
</ul>
</li>
<li>ğŸ”¨ VÃ­ dá»¥ vá» lá»‡nh ENV:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ENV</span><span class="token instruction"> NODE_ENV=production</span><br></span></code></pre></div></div>
<p>ğŸ‘‰ Biáº¿n mÃ´i trÆ°á»ng <code>NODE_ENV</code> sáº½ cÃ³ giÃ¡ trá»‹ lÃ  <strong>production</strong> trong toÃ n bá»™ container khi nÃ³ Ä‘ang cháº¡y. CÃ¡c á»©ng dá»¥ng bÃªn trong container cÃ³ thá»ƒ sá»­ dá»¥ng giÃ¡ trá»‹ nÃ y Ä‘á»ƒ biáº¿t container Ä‘ang cháº¡y trong mÃ´i trÆ°á»ng sáº£n xuáº¥t.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sá»­-dá»¥ng-biáº¿n-mÃ´i-trÆ°á»ng-trong-cÃ¡c-lá»‡nh-káº¿-tiáº¿p">Sá»­ dá»¥ng biáº¿n mÃ´i trÆ°á»ng trong cÃ¡c lá»‡nh káº¿ tiáº¿p:<a href="#sá»­-dá»¥ng-biáº¿n-mÃ´i-trÆ°á»ng-trong-cÃ¡c-lá»‡nh-káº¿-tiáº¿p" class="hash-link" aria-label="Direct link to Sá»­ dá»¥ng biáº¿n mÃ´i trÆ°á»ng trong cÃ¡c lá»‡nh káº¿ tiáº¿p:" title="Direct link to Sá»­ dá»¥ng biáº¿n mÃ´i trÆ°á»ng trong cÃ¡c lá»‡nh káº¿ tiáº¿p:">â€‹</a></h3>
<ul>
<li>Biáº¿n mÃ´i trÆ°á»ng cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trong cÃ¡c lá»‡nh tiáº¿p theo trong <strong>Dockerfile</strong>:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ENV</span><span class="token instruction"> APP_HOME=/app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">WORKDIR</span><span class="token instruction"> </span><span class="token instruction variable" style="color:#36acaa">$APP_HOME</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> . </span><span class="token instruction variable" style="color:#36acaa">$APP_HOME</span><br></span></code></pre></div></div>
<p>ğŸ‘‰ á» Ä‘Ã¢y, ta Ä‘á»‹nh nghÄ©a má»™t biáº¿n mÃ´i trÆ°á»ng <code>APP_HOME</code>, sau Ä‘Ã³ sá»­ dá»¥ng nÃ³ trong lá»‡nh <code>WORKDIR</code> vÃ  <code>COPY</code> Ä‘á»ƒ chá»‰ Ä‘á»‹nh thÆ° má»¥c lÃ m viá»‡c vÃ  sao chÃ©p mÃ£ nguá»“n vÃ o thÆ° má»¥c Ä‘Ã³.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thay-Ä‘á»•i-giÃ¡-trá»‹-cá»§a-biáº¿n-mÃ´i-trÆ°á»ng-khi-cháº¡y-container">Thay Ä‘á»•i giÃ¡ trá»‹ cá»§a biáº¿n mÃ´i trÆ°á»ng khi cháº¡y container:<a href="#thay-Ä‘á»•i-giÃ¡-trá»‹-cá»§a-biáº¿n-mÃ´i-trÆ°á»ng-khi-cháº¡y-container" class="hash-link" aria-label="Direct link to Thay Ä‘á»•i giÃ¡ trá»‹ cá»§a biáº¿n mÃ´i trÆ°á»ng khi cháº¡y container:" title="Direct link to Thay Ä‘á»•i giÃ¡ trá»‹ cá»§a biáº¿n mÃ´i trÆ°á»ng khi cháº¡y container:">â€‹</a></h3>
<ul>
<li>Khi ta cháº¡y container, ta cÃ³ thá»ƒ ghi Ä‘Ã¨ giÃ¡ trá»‹ cá»§a má»™t biáº¿n mÃ´i trÆ°á»ng báº±ng cÃ¡ch sá»­ dá»¥ng tÃ¹y chá»n -e trong lá»‡nh docker run:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">NODE_ENV</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">development myapp</span><br></span></code></pre></div></div>
<p>Trong vÃ­ dá»¥ trÃªn, giÃ¡ trá»‹ cá»§a <code>NODE_ENV</code> sáº½ Ä‘Æ°á»£c thay Ä‘á»•i thÃ nh <code>development</code>, dÃ¹ trong Dockerfile nÃ³ Ä‘Ã£ Ä‘Æ°á»£c Ä‘áº·t lÃ  <code>production</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="arg">ARG<a href="#arg" class="hash-link" aria-label="Direct link to ARG" title="Direct link to ARG">â€‹</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><ul>
<li>Lá»‡nh <code>ARG</code> trong Dockerfile Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ <strong>Ä‘á»‹nh nghÄ©a cÃ¡c biáº¿n</strong> mÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c <strong>sá»­ dá»¥ng trong quÃ¡ trÃ¬nh build</strong> Docker image. CÃ¡c biáº¿n nÃ y chá»‰ cÃ³ hiá»‡u lá»±c trong quÃ¡ trÃ¬nh build vÃ  <strong>khÃ´ng tá»“n táº¡i trong container</strong> khi image Ä‘Ã£ Ä‘Æ°á»£c táº¡o ra.</li>
<li>CÃº phÃ¡p:</li>
</ul><div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> &lt;name&gt;[=&lt;default_value&gt;]</span><br></span></code></pre></div></div><ul>
<li>Trong Ä‘Ã³:<!-- -->
<ul>
<li><strong><code>&lt;name&gt;</code></strong> : TÃªn cá»§a biáº¿n.</li>
<li><strong><code>&lt;default_value&gt;</code></strong> (tÃ¹y chá»n): GiÃ¡ trá»‹ máº·c Ä‘á»‹nh cho biáº¿n náº¿u khÃ´ng Ä‘Æ°á»£c cung cáº¥p khi build.</li>
</ul>
</li>
</ul></div></div>
<ul>
<li>
<p>ğŸ§  Má»¥c Ä‘Ã­ch cá»§a <code>ARG</code>:</p>
<ul>
<li>Thiáº¿t láº­p giÃ¡ trá»‹ cáº¥u hÃ¬nh build: Ta cÃ³ thá»ƒ sá»­ dá»¥ng <code>ARG</code> Ä‘á»ƒ truyá»n cÃ¡c giÃ¡ trá»‹ vÃ o trong Dockerfile mÃ  cÃ³ thá»ƒ thay Ä‘á»•i Ä‘Æ°á»£c trong quÃ¡ trÃ¬nh build.</li>
</ul>
</li>
<li>
<p>ğŸ”¨ VÃ­ dá»¥ cÆ¡ báº£n vá» <code>ARG</code>:</p>
</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Äá»‹nh nghÄ©a biáº¿n ARG vá»›i giÃ¡ trá»‹ máº·c Ä‘á»‹nh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> VERSION=1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Sá»­ dá»¥ng giÃ¡ trá»‹ cá»§a ARG trong Dockerfile</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> echo </span><span class="token instruction string" style="color:#e3116c">&quot;Building version ${VERSION}&quot;</span><br></span></code></pre></div></div>
<p>ğŸ‘‰ Khi build image, Docker sáº½ sá»­ dá»¥ng giÃ¡ trá»‹ <code>1.0</code> cho biáº¿n <code>VERSION</code> trá»« khi ta thay Ä‘á»•i nÃ³ khi cháº¡y lá»‡nh build.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thay-Ä‘á»•i-giÃ¡-trá»‹-arg-khi-build">Thay Ä‘á»•i giÃ¡ trá»‹ <code>ARG</code> khi build<a href="#thay-Ä‘á»•i-giÃ¡-trá»‹-arg-khi-build" class="hash-link" aria-label="Direct link to thay-Ä‘á»•i-giÃ¡-trá»‹-arg-khi-build" title="Direct link to thay-Ä‘á»•i-giÃ¡-trá»‹-arg-khi-build">â€‹</a></h3>
<ul>
<li>Khi build, ta cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh giÃ¡ trá»‹ cá»§a <code>ARG</code> qua tham sá»‘ <code>--build-arg</code>.</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build --build-arg </span><span class="token assign-left variable" style="color:#36acaa">VERSION</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2.0</span><span class="token plain"> </span><span class="token builtin class-name">.</span><br></span></code></pre></div></div>
<p>ğŸ‘‰ Trong trÆ°á»ng há»£p nÃ y, Dockerfile sáº½ sá»­ dá»¥ng giÃ¡ trá»‹ <code>2.0</code> thay vÃ¬ <code>1.0</code>.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sá»­-dá»¥ng-arg-trong-from">Sá»­ dá»¥ng <code>ARG</code> trong <code>FROM</code>:<a href="#sá»­-dá»¥ng-arg-trong-from" class="hash-link" aria-label="Direct link to sá»­-dá»¥ng-arg-trong-from" title="Direct link to sá»­-dá»¥ng-arg-trong-from">â€‹</a></h3>
<ul>
<li>Ta cÃ³ thá»ƒ sá»­ dá»¥ng <code>ARG</code> Ä‘á»ƒ thay Ä‘á»•i base image trong quÃ¡ trÃ¬nh build:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> BASE_IMAGE=node:14</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> </span><span class="token instruction variable" style="color:#36acaa">${BASE_IMAGE}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Tiáº¿p tá»¥c cÃ¡c lá»‡nh khÃ¡c...</span><br></span></code></pre></div></div>
<ul>
<li>Khi build, ta cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh base image nhÆ° sau:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build --build-arg </span><span class="token assign-left variable" style="color:#36acaa">BASE_IMAGE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">node:16 </span><span class="token builtin class-name">.</span><br></span></code></pre></div></div>
<p>ğŸ‘‰ Trong vÃ­ dá»¥ nÃ y, Docker sáº½ sá»­ dá»¥ng <code>node:16</code> thay vÃ¬ <code>node:14</code>.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="káº¿t-há»£p-vá»›i-env">Káº¿t há»£p vá»›i <code>ENV</code>:<a href="#káº¿t-há»£p-vá»›i-env" class="hash-link" aria-label="Direct link to káº¿t-há»£p-vá»›i-env" title="Direct link to káº¿t-há»£p-vá»›i-env">â€‹</a></h3>
<ul>
<li>Má»™t khi <code>ARG</code> Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a, ta cÃ³ thá»ƒ chuyá»ƒn giÃ¡ trá»‹ cá»§a nÃ³ sang má»™t biáº¿n mÃ´i trÆ°á»ng (<code>ENV</code>) Ä‘á»ƒ sá»­ dá»¥ng trong container khi nÃ³ cháº¡y.</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> VERSION=1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ENV</span><span class="token instruction"> VERSION=</span><span class="token instruction variable" style="color:#36acaa">${VERSION}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> echo </span><span class="token instruction string" style="color:#e3116c">&quot;Running version ${VERSION}&quot;</span><br></span></code></pre></div></div>
<p>ğŸ‘‰ Trong trÆ°á»ng há»£p nÃ y, khi container Ä‘Æ°á»£c cháº¡y, giÃ¡ trá»‹ <code>VERSION</code> sáº½ cÃ³ sáºµn trong mÃ´i trÆ°á»ng container.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>LÆ°u Ã½</div><div class="admonitionContent_BuS1"><ul>
<li>Biáº¿n <code>ARG</code> chá»‰ cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trong quÃ¡ trÃ¬nh build. Sau khi image Ä‘Ã£ Ä‘Æ°á»£c táº¡o ra, cÃ¡c biáº¿n <code>ARG</code> sáº½ khÃ´ng tá»“n táº¡i trong container.</li>
<li>Náº¿u khÃ´ng chá»‰ Ä‘á»‹nh giÃ¡ trá»‹ khi build, Docker sáº½ sá»­ dá»¥ng giÃ¡ trá»‹ máº·c Ä‘á»‹nh (náº¿u cÃ³).</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><ul>
<li>
<p>Trong má»™t <code>Dockerfile</code>, chÃºng ta thÆ°á»ng dÃ¹ng káº¿t há»£p <code>ARG</code> vÃ  <code>ENV</code> Ä‘á»ƒ truyá»n biáº¿n mÃ´i trÆ°á»ng vÃ o quÃ¡ trÃ¬nh <strong>build</strong> á»©ng dá»¥ng front-end, Ä‘áº·c biá»‡t vá»›i cÃ¡c framework nhÆ° React, Vue, Angular,..Khi cháº¡y <code>npm run build</code>, chÃºng sáº½ Ä‘á»c cÃ¡c biáº¿n mÃ´i trÆ°á»ng lÃºc build (build time) Ä‘á»ƒ nhÃºng tháº³ng vÃ o file JS/HTML (khÃ´ng pháº£i runtime).</p>
</li>
<li>
<p>VÃ­ dá»¥:</p>
</li>
</ul><div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Khai bÃ¡o ARG</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> REACT_APP_API_URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># GÃ¡n vÃ o ENV Ä‘á»ƒ cÃ¡c bÆ°á»›c build cÃ³ thá»ƒ truy cáº­p</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ENV</span><span class="token instruction"> REACT_APP_API_URL=</span><span class="token instruction variable" style="color:#36acaa">$REACT_APP_API_URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Copy mÃ£ nguá»“n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> . .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Build á»©ng dá»¥ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> npm install &amp;&amp; npm run build</span><br></span></code></pre></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build --build-arg </span><span class="token assign-left variable" style="color:#36acaa">REACT_APP_API_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://api.example.com </span><span class="token builtin class-name">.</span><br></span></code></pre></div></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-vÃ­-dá»¥-Ä‘áº§y-Ä‘á»§">ğŸ“Œ VÃ­ dá»¥ Ä‘áº§y Ä‘á»§:<a href="#-vÃ­-dá»¥-Ä‘áº§y-Ä‘á»§" class="hash-link" aria-label="Direct link to ğŸ“Œ VÃ­ dá»¥ Ä‘áº§y Ä‘á»§:" title="Direct link to ğŸ“Œ VÃ­ dá»¥ Ä‘áº§y Ä‘á»§:">â€‹</a></h3>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Äá»‹nh nghÄ©a ARG cho version vÃ  base image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> VERSION=1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ARG</span><span class="token instruction"> BASE_IMAGE=node:14</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Chá»n base image Ä‘á»™ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> </span><span class="token instruction variable" style="color:#36acaa">${BASE_IMAGE}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Äáº·t ENV tá»« ARG</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ENV</span><span class="token instruction"> APP_VERSION=</span><span class="token instruction variable" style="color:#36acaa">${VERSION}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># CÃ i Ä‘áº·t dependencies vÃ  sao chÃ©p mÃ£ nguá»“n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> npm install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> . /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Cháº¡y á»©ng dá»¥ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;npm&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;start&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<ul>
<li>Build command:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build --build-arg </span><span class="token assign-left variable" style="color:#36acaa">VERSION</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2.0</span><span class="token plain"> --build-arg </span><span class="token assign-left variable" style="color:#36acaa">BASE_IMAGE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">node:16 </span><span class="token builtin class-name">.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="from">FROM<a href="#from" class="hash-link" aria-label="Direct link to FROM" title="Direct link to FROM">â€‹</a></h2>
<ul>
<li>Trong Dockerfile, lá»‡nh <code>FROM</code> Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ <strong>chá»‰ Ä‘á»‹nh image gá»‘c (base image)</strong> mÃ  Docker sáº½ sá»­ dá»¥ng lÃ m ná»n táº£ng Ä‘á»ƒ xÃ¢y dá»±ng image má»›i.</li>
<li>Má»¥c Ä‘Ã­ch chÃ­nh cá»§a FROM:<!-- -->
<ul>
<li>âœ… XÃ¡c Ä‘á»‹nh mÃ´i trÆ°á»ng cÆ¡ báº£n: vÃ­ dá»¥ Ubuntu, Alpine, Node.js, Python, v.v.</li>
<li>âœ… Káº¿ thá»«a cÃ¡c cÃ´ng cá»¥ vÃ  thÆ° viá»‡n cÃ³ sáºµn trong image Ä‘Ã³.</li>
<li>âœ… LÃ  bÆ°á»›c Ä‘áº§u tiÃªn báº¯t buá»™c trong háº§u háº¿t cÃ¡c Dockerfile (trá»« multistage build thÃ¬ cÃ³ thá»ƒ cÃ³ nhiá»u <code>FROM</code>).</li>
</ul>
</li>
<li>VÃ­ dá»¥:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> node:18-alpine</span><br></span></code></pre></div></div>
<p>ğŸ‘‰ DÃ²ng nÃ y nÃ³i ráº±ng Docker sáº½ báº¯t Ä‘áº§u tá»« image <code>node</code> phiÃªn báº£n <code>18-alpine</code>, má»™t image nhá» gá»n Ä‘Ã£ cÃ i sáºµn Node.js.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="user">USER<a href="#user" class="hash-link" aria-label="Direct link to USER" title="Direct link to USER">â€‹</a></h2>
<ul>
<li>Lá»‡nh <code>USER</code> trong Dockerfile Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ <strong>thiáº¿t láº­p user (ngÆ°á»i dÃ¹ng)</strong> mÃ  cÃ¡c lá»‡nh sau Ä‘Ã³ trong Dockerfile (vÃ  container khi cháº¡y) sáº½ Ä‘Æ°á»£c thá»±c thi dÆ°á»›i quyá»n cá»§a ngÆ°á»i dÃ¹ng Ä‘Ã³.</li>
<li>CÃº phÃ¡p:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">USER</span><span class="token instruction"> &lt;username&gt;[:&lt;group&gt;]</span><br></span></code></pre></div></div>
<ul>
<li>
<p>ğŸ§  Má»¥c Ä‘Ã­ch:</p>
<ul>
<li><strong>Báº£o máº­t</strong>: TrÃ¡nh cháº¡y container vá»›i quyá»n <code>root</code>, háº¡n cháº¿ nguy cÆ¡ táº¥n cÃ´ng.</li>
<li><strong>PhÃ¢n quyá»n</strong>: DÃ¹ng user phÃ¹ há»£p vá»›i á»©ng dá»¥ng (vÃ­ dá»¥ <code>node</code>, <code>www-data</code>, v.v.)</li>
<li><strong>Chuáº©n DevOps/SRE</strong>: CÃ¡c tá»• chá»©c thÆ°á»ng khÃ´ng cho phÃ©p cháº¡y container báº±ng <code>root</code>.</li>
</ul>
</li>
<li>
<p><strong>VÃ­ dá»¥ 1</strong>: DÃ¹ng user cÃ³ sáºµn trong base image</p>
</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> node:18-alpine</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">WORKDIR</span><span class="token instruction"> /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> . .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> npm install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Chuyá»ƒn sang user node (Ä‘Ã£ cÃ³ sáºµn trong node image)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">USER</span><span class="token instruction"> node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;node&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;index.js&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<ul>
<li><strong>VÃ­ dá»¥ 2</strong>: Táº¡o user má»›i rá»“i dÃ¹ng</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> python:3.10-slim</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Táº¡o user khÃ´ng pháº£i root</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> useradd -m myuser</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Äáº·t user hiá»‡n táº¡i</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">USER</span><span class="token instruction"> myuser</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;python&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;app.py&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="expose">EXPOSE<a href="#expose" class="hash-link" aria-label="Direct link to EXPOSE" title="Direct link to EXPOSE">â€‹</a></h2>
<ul>
<li>Lá»‡nh <code>EXPOSE</code> trong Dockerfile dÃ¹ng Ä‘á»ƒ <strong>khai bÃ¡o cá»•ng (port)</strong> mÃ  container sáº½ <strong>láº¯ng nghe (listen)</strong> khi cháº¡y. ÄÃ¢y lÃ  cÃ¡ch <strong>document hÃ³a</strong> cho Docker vÃ  ngÆ°á»i dÃ¹ng biáº¿t á»©ng dá»¥ng trong container hoáº¡t Ä‘á»™ng trÃªn cá»•ng nÃ o.</li>
<li>VÃ­ dá»¥:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">EXPOSE</span><span class="token instruction"> 3000</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>LÆ°u Ã½</div><div class="admonitionContent_BuS1"><ul>
<li><code>EXPOSE</code> <strong>khÃ´ng tá»± Ä‘á»™ng má»Ÿ cá»•ng ra ngoÃ i host</strong>. NÃ³ chá»‰ lÃ  metadata Ä‘á»ƒ tÃ i liá»‡u hoÃ¡.</li>
<li>Äá»ƒ tháº­t sá»± <strong>truy cáº­p tá»« bÃªn ngoÃ i</strong> , ta cáº§n dÃ¹ng <code>-p</code> khi cháº¡y container:</li>
</ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">:3000 my-image</span><br></span></code></pre></div></div><p>ğŸ‘‰ LÃºc nÃ y:</p><ul>
<li>Cá»•ng <code>3000</code> trong container Ä‘Æ°á»£c Ã¡nh xáº¡ ra cá»•ng <code>8080</code> trÃªn mÃ¡y host.</li>
<li>Ta cÃ³ thá»ƒ truy cáº­p app qua <code>http://localhost:8080</code>.</li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cmd">CMD<a href="#cmd" class="hash-link" aria-label="Direct link to CMD" title="Direct link to CMD">â€‹</a></h2>
<ul>
<li>Lá»‡nh <code>CMD</code> trong Dockerfile Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ <strong>chá»‰ Ä‘á»‹nh lá»‡nh máº·c Ä‘á»‹nh sáº½ Ä‘Æ°á»£c cháº¡y</strong> khi container khá»Ÿi Ä‘á»™ng.</li>
<li>CÃº phÃ¡p:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;executable&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;param1&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;param2&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<ul>
<li>VÃ­ dá»¥:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;node&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;index.js&quot;</span><span class="token instruction">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;npm&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;run&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;dev&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>LÆ°u Ã½</div><div class="admonitionContent_BuS1"><ul>
<li>Trong má»™t Dockerfile chá»‰ Ä‘Æ°á»£c cÃ³ <strong>má»™t dÃ²ng</strong> <code>CMD</code> (lá»‡nh sau sáº½ ghi Ä‘Ã¨ lá»‡nh trÆ°á»›c).</li>
<li>Náº¿u ta cháº¡y <code>docker run IMAGE lá»‡nh_má»›i</code> , thÃ¬ lá»‡nh Ä‘Ã³ sáº½ <strong>ghi Ä‘Ã¨ CMD</strong> .</li>
<li>VÃ­ dá»¥:</li>
</ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run my-image </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> anotherFile.js</span><br></span></code></pre></div></div><p>â†’ Lá»‡nh <code>node anotherFile.js</code> sáº½ thay tháº¿ <code>CMD [&quot;npm&quot;, &quot;start&quot;]</code>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="entrypoint">ENTRYPOINT<a href="#entrypoint" class="hash-link" aria-label="Direct link to ENTRYPOINT" title="Direct link to ENTRYPOINT">â€‹</a></h2>
<ul>
<li>Lá»‡nh <code>ENTRYPOINT</code> trong Dockerfile dÃ¹ng Ä‘á»ƒ <strong>Ä‘á»‹nh nghÄ©a lá»‡nh chÃ­nh (main command)</strong> mÃ  container <strong>luÃ´n luÃ´n cháº¡y khi khá»Ÿi Ä‘á»™ng</strong> , <strong>khÃ´ng bá»‹ ghi Ä‘Ã¨</strong> bá»Ÿi tham sá»‘ khi cháº¡y <code>docker run</code>.</li>
<li>Lá»‡nh nÃ y thÆ°á»ng Ä‘Æ°á»£c káº¿t há»£p vá»›i lá»‡nh <code>CMD</code>. Khi káº¿t há»£p, cÃ¢u lá»‡nh thá»±c thi sáº½ lÃ  <code>ENTRYPOINT + CMD</code></li>
<li>CÃº phÃ¡p:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">ENTRYPOINT</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;executable&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;param1&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;param2&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vÃ­-dá»¥-1">VÃ­ dá»¥ 1:<a href="#vÃ­-dá»¥-1" class="hash-link" aria-label="Direct link to VÃ­ dá»¥ 1:" title="Direct link to VÃ­ dá»¥ 1:">â€‹</a></h3>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> ubuntu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ENTRYPOINT</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;echo&quot;</span><span class="token instruction">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;Hello from Docker!&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<p>ğŸ‘‰ Khi thá»±c thi:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run my-image </span><span class="token comment" style="color:#999988;font-style:italic"># Output: Hello from Docker!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run my-image </span><span class="token string" style="color:#e3116c">&quot;Custom message&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Output: Custom message</span><br></span></code></pre></div></div>
<p>âœ… VÃ¬ <code>ENTRYPOINT</code> lÃ  <code>echo</code>, cÃ²n <code>CMD</code> chá»‰ lÃ  tham sá»‘ máº·c Ä‘á»‹nh (<code>Hello from Docker!</code>) náº¿u khÃ´ng cÃ³ gÃ¬ Ä‘Æ°á»£c ghi Ä‘Ã¨.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vÃ­-dá»¥-2">VÃ­ dá»¥ 2:<a href="#vÃ­-dá»¥-2" class="hash-link" aria-label="Direct link to VÃ­ dá»¥ 2:" title="Direct link to VÃ­ dá»¥ 2:">â€‹</a></h3>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> python:3.10-slim</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">WORKDIR</span><span class="token instruction"> /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> script.py .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">ENTRYPOINT</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">&quot;python&quot;</span><span class="token instruction">, </span><span class="token instruction string" style="color:#e3116c">&quot;script.py&quot;</span><span class="token instruction">]</span><br></span></code></pre></div></div>
<p>ğŸ‘‰ Khi thá»±c thi:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run my-image arg1 arg2</span><br></span></code></pre></div></div>
<p>â¡ï¸ Docker sáº½ thá»±c hiá»‡n:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python script.py arg1 arg2</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>LÆ°u Ã½</div><div class="admonitionContent_BuS1"><ul>
<li>Náº¿u muá»‘n ghi Ä‘Ã¨ <code>ENTRYPOINT</code>, ta <strong>pháº£i dÃ¹ng flag</strong> <code>--entrypoint</code> khi cháº¡y container.</li>
<li>Trong má»™t Dockerfile chá»‰ Ä‘Æ°á»£c cÃ³ <strong>1</strong> <code>ENTRYPOINT</code> , dÃ²ng sau sáº½ ghi Ä‘Ã¨ dÃ²ng trÆ°á»›c náº¿u cÃ³ nhiá»u.</li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="run">RUN<a href="#run" class="hash-link" aria-label="Direct link to RUN" title="Direct link to RUN">â€‹</a></h2>
<ul>
<li>Lá»‡nh <code>RUN</code> trong Dockerfile dÃ¹ng Ä‘á»ƒ <strong>thá»±c thi lá»‡nh trong quÃ¡ trÃ¬nh build image</strong>, tá»©c lÃ  lá»‡nh Ä‘Ã³ <strong>cháº¡y táº¡i thá»i Ä‘iá»ƒm Docker build</strong>, <strong>khÃ´ng pháº£i khi container cháº¡y</strong>.</li>
<li>DÃ¹ng <code>RUN</code> khi:<!-- -->
<ul>
<li>CÃ i Ä‘áº·t pháº§n má»m, package</li>
<li>Thiáº¿t láº­p mÃ´i trÆ°á»ng</li>
<li>BiÃªn dá»‹ch code</li>
<li>Dá»n dáº¹p file táº¡m, cache</li>
<li>Táº¡o file, user, thÆ° má»¥c cáº§n thiáº¿t</li>
</ul>
</li>
<li>VÃ­ dá»¥:</li>
</ul>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> node:18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># CÃ i thÃªm curl vÃ  nano</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt-get update &amp;&amp; apt-get install -y curl nano</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Táº¡o thÆ° má»¥c á»©ng dá»¥ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> mkdir /app</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>LÆ°u Ã½</div><div class="admonitionContent_BuS1"><ul>
<li>Má»—i lá»‡nh <code>RUN</code> táº¡o ra <strong>má»™t layer má»›i</strong> trong image â†’ nÃªn <strong>gá»™p cÃ¡c lá»‡nh</strong> láº¡i báº±ng <code>&amp;&amp;</code> Ä‘á»ƒ tá»‘i Æ°u kÃ­ch thÆ°á»›c image.</li>
</ul><p>âœ… NÃªn:</p><div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt update &amp;&amp; apt install -y curl git &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br></span></code></pre></div></div><p>âŒ KhÃ´ng nÃªn:</p><div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt update</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt install -y curl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> apt install -y git</span><br></span></code></pre></div></div></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docker/reference/cli/docker-run"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">docker run</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#copy" class="table-of-contents__link toc-highlight">COPY</a><ul><li><a href="#ï¸-cÃ¡c-tÃ¹y-chá»n-options" class="table-of-contents__link toc-highlight">ğŸ› ï¸ CÃ¡c tÃ¹y chá»n (options)</a></li><li><a href="#src" class="table-of-contents__link toc-highlight"><code>&lt;src&gt;</code></a></li><li><a href="#dest" class="table-of-contents__link toc-highlight"><code>&lt;dest&gt;</code></a></li></ul></li><li><a href="#env" class="table-of-contents__link toc-highlight">ENV</a><ul><li><a href="#sá»­-dá»¥ng-biáº¿n-mÃ´i-trÆ°á»ng-trong-cÃ¡c-lá»‡nh-káº¿-tiáº¿p" class="table-of-contents__link toc-highlight">Sá»­ dá»¥ng biáº¿n mÃ´i trÆ°á»ng trong cÃ¡c lá»‡nh káº¿ tiáº¿p:</a></li><li><a href="#thay-Ä‘á»•i-giÃ¡-trá»‹-cá»§a-biáº¿n-mÃ´i-trÆ°á»ng-khi-cháº¡y-container" class="table-of-contents__link toc-highlight">Thay Ä‘á»•i giÃ¡ trá»‹ cá»§a biáº¿n mÃ´i trÆ°á»ng khi cháº¡y container:</a></li></ul></li><li><a href="#arg" class="table-of-contents__link toc-highlight">ARG</a><ul><li><a href="#thay-Ä‘á»•i-giÃ¡-trá»‹-arg-khi-build" class="table-of-contents__link toc-highlight">Thay Ä‘á»•i giÃ¡ trá»‹ <code>ARG</code> khi build</a></li><li><a href="#sá»­-dá»¥ng-arg-trong-from" class="table-of-contents__link toc-highlight">Sá»­ dá»¥ng <code>ARG</code> trong <code>FROM</code>:</a></li><li><a href="#káº¿t-há»£p-vá»›i-env" class="table-of-contents__link toc-highlight">Káº¿t há»£p vá»›i <code>ENV</code>:</a></li><li><a href="#-vÃ­-dá»¥-Ä‘áº§y-Ä‘á»§" class="table-of-contents__link toc-highlight">ğŸ“Œ VÃ­ dá»¥ Ä‘áº§y Ä‘á»§:</a></li></ul></li><li><a href="#from" class="table-of-contents__link toc-highlight">FROM</a></li><li><a href="#user" class="table-of-contents__link toc-highlight">USER</a></li><li><a href="#expose" class="table-of-contents__link toc-highlight">EXPOSE</a></li><li><a href="#cmd" class="table-of-contents__link toc-highlight">CMD</a></li><li><a href="#entrypoint" class="table-of-contents__link toc-highlight">ENTRYPOINT</a><ul><li><a href="#vÃ­-dá»¥-1" class="table-of-contents__link toc-highlight">VÃ­ dá»¥ 1:</a></li><li><a href="#vÃ­-dá»¥-2" class="table-of-contents__link toc-highlight">VÃ­ dá»¥ 2:</a></li></ul></li><li><a href="#run" class="table-of-contents__link toc-highlight">RUN</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>